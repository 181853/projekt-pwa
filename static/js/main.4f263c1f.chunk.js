(this["webpackJsonpprojekt-pwa"]=this["webpackJsonpprojekt-pwa"]||[]).push([[0],{101:function(e,a,t){e.exports=t(122)},121:function(e,a,t){},122:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(22),c=t.n(o),l=t(9),i=t.n(l),s=t(18),m=t(36),u=t.n(m),d=(t(107),t(109),t(123),Object(n.createContext)(null)),p=function(e){var a=e.children;u.a.apps.length||u.a.initializeApp({apiKey:"AIzaSyByC4nUqEIA8s4FF5raJ70Fo_oPqmepjAE",authDomain:"projekt-pwa.firebaseapp.com",databaseURL:"https://projekt-pwa.firebaseio.com",projectId:"projekt-pwa",storageBucket:"projekt-pwa.appspot.com",messagingSenderId:"158332065986",appId:"1:158332065986:web:d1e05e90d13cb784d3035b"});var t=u.a.auth(),n=u.a.firestore(),o=u.a.storage();n.enablePersistence();var c=new u.a.auth.GoogleAuthProvider,l=new u.a.auth.GithubAuthProvider,m=function(){var e=Object(s.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.collection("users").doc(a).get();case 3:if(!(t=e.sent).exists){e.next=6;break}return e.abrupt("return",t.data());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("getUser",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(d.Provider,{value:{app:u.a,auth:t,createUserWithEmailAndPassword:function(e,a){return t.createUserWithEmailAndPassword(e,a)},signInWithEmailAndPassword:function(e,a){return t.signInWithEmailAndPassword(e,a)},signInWithGoogle:function(){return t.signInWithPopup(c)},signInWithGithub:function(){return t.signInWithPopup(l)},signOut:function(){return t.signOut()},getImage:function(e){return o.ref("/images/".concat(e))},createPost:function(e,a){return n.collection("posts").doc(e).set(a)},getPosts:function(){return n.collection("posts")},getPost:function(e){return n.collection("posts").doc(e)},getUser:m,createUser:function(e,a){return n.collection("users").doc(e).set(a)},getPostComments:function(e){return n.collection("comments").doc(e).collection("values")}}},a)},E=t(19),f=t(39),g=t(31),b=t(11),h=t(33),w=t(21),v=t(15),y=t(25),j=t(8),k=t(14),z=t(99),N=t(95),x=t(42),O=t(62),I=t(100),C=t(90),S=function(){var e=Object(n.useContext)(d).auth,a=Object(n.useState)((function(){var a=e.currentUser;return{isLoading:!a,user:a}})),t=Object(b.a)(a,2),r=t[0],o=t[1];function c(e){o({isLoading:!1,user:e})}return Object(n.useEffect)((function(){var a=e.onAuthStateChanged(c);return function(){return a()}}),[e]),{user:r.user,isLoading:r.isLoading}},P=function(e){var a=e.postId,t=e.likes,o=void 0===t?[]:t,c=Object(n.useContext)(d).getPost,l=S().user,i=l?l.uid:null,s=o.includes(i);return r.a.createElement(k.a,Object.assign({disabled:!l,variant:s?"danger":"outline-danger"},!l&&{style:{pointerEvents:"none"}},{className:"float-right",onClick:function(){return l?s?void c(a).update({likes:o.filter((function(e){return e!==i}))}):void c(a).update({likes:[].concat(Object(I.a)(o),[i])}):{}}}),r.a.createElement("span",{className:"mr-2"},o.length),r.a.createElement(x.a,{icon:s?C.a:O.b}))},A={REGISTRATION:"/projekt-pwa/rejestracja",LOGIN:"/projekt-pwa/logowanie",POST:"/projekt-pwa/ogloszenie",POST_NEW:"/projekt-pwa/nowe-ogloszenie",HOME:"/projekt-pwa/home",ROOT:"/projekt-pwa/"},L={"auth/invalid-email":"Nieprawid\u0142owy adres email.","auth/wrong-password":"Nieprawid\u0142owe has\u0142o.","auth/email-already-in-use":"U\u017cytkownik o podanym emailu ju\u017c istnieje.","auth/user-not-found":"U\u017cytkownik nie istnieje.","auth/popup-closed-by-user":"Pop up zamkni\u0119ty przez u\u017cytkownika.","auth/weak-password":"Has\u0142o za s\u0142abe."},F=function(){var e=Object(s.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+a+".json?access_token=pk.eyJ1IjoibG9zdGZhbjE1IiwiYSI6ImNrOGtpbWxodzAxd2IzbHF3YTExc2U5ZjQifQ.gcuJnSgsvuUZ5Mz7mIew0w&autocomplete=false&country=pl&types=address%2Cpoi&language=pl");case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n.features);case 9:return e.abrupt("return",[]);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(a){return e.apply(this,arguments)}}(),T=function(e){return new Intl.DateTimeFormat("pl-PL",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(e)},W=function(){var e=Object(n.useContext)(d).getPosts,a=S().user,t=r.a.useState(!1),o=Object(b.a)(t,2),c=o[0],l=o[1],i=r.a.useState(null),s=Object(b.a)(i,2),m=s[0],u=s[1];return Object(n.useEffect)((function(){l(!0);var a=e().onSnapshot((function(e){var a=e.docs.map((function(e){var a=e.data();return Object(g.a)({id:e.id},a)})).sort((function(e,a){return a.createdAt-e.createdAt}));u(a),l(!1)}));return function(){a()}}),[]),r.a.createElement(y.a,{className:"mt-5"},r.a.createElement(w.a,{className:"justify-content-center"},c?r.a.createElement(h.a,{animation:"border",variant:"info"}):(m||[]).map((function(e){var t=e.id,n=e.title,o=e.description,c=e.createdAt,l=e.imageURL,i=e.likes;return r.a.createElement(v.a,{md:"6",lg:"4",className:"mb-4",key:t},r.a.createElement(j.a,{className:"shadow"},r.a.createElement(j.a.Img,{variant:"top",src:l}),r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,n),r.a.createElement(j.a.Text,{className:"truncated-text"},o),r.a.createElement(w.a,null,r.a.createElement(v.a,null,r.a.createElement(k.a,{as:E.b,to:A.POST+"/"+t,variant:"outline-secondary",block:!0},"Wi\u0119cej")),r.a.createElement(v.a,{className:"text-right"},a?r.a.createElement(P,{likes:i,postId:t}):r.a.createElement(z.a,{key:"top",placement:"top",overlay:r.a.createElement(N.a,{id:"tooltip-disabled"},"Musisz by\u0107 zalogowany by m\xf3c g\u0142osowa\u0107")},r.a.createElement("span",{className:"d-inline-block"},r.a.createElement(P,{likes:i,postId:t})))))),r.a.createElement(j.a.Footer,{className:"text-muted text-center"},r.a.createElement(x.a,{icon:O.a,className:"mr-1"}),T(c))))}))))},G=t(58),U=t(57),B=t(85),R=function(e){var a=e.user,t=e.className,n=a.photoURL||"https://avatars.dicebear.com/v2/jdenticon/".concat(a.uid,".svg");return r.a.createElement("img",{alt:"avatar",className:t,loading:"lazy",src:n,height:38,width:38})},_=function(){var e=Object(f.f)(),a=S().user,t=Object(n.useContext)(d).signOut;return r.a.createElement("header",null,r.a.createElement(G.a,{className:"bg-white shadow-sm",expand:"sm"},r.a.createElement(G.a.Brand,{as:E.b,to:A.HOME},r.a.createElement("img",{src:"/projekt-pwa/logo.png",alt:"//FIXME logo",width:30,height:30,className:"d-inline-block align-top"}),"//FIXME"),r.a.createElement(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(G.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end"},a?r.a.createElement(B.a,null,r.a.createElement(k.a,{as:E.b,to:A.POST_NEW,variant:"outline-info",className:"mt-2 mt-sm-0 mr-sm-2"},"Dodaj og\u0142oszenie"),r.a.createElement(U.a,{alignRight:!0,title:r.a.createElement(R,{user:a}),id:"basic-nav-dropdown",className:"text-muted mt-2 mt-sm-0"},r.a.createElement(U.a.Item,{disabled:!0},a.displayName||a.email),r.a.createElement(U.a.Divider,null),r.a.createElement(U.a.Item,{as:k.a,onClick:function(){t().then((function(){return e.push(A.HOME)}))}},"Wyloguj"))):r.a.createElement(B.a,null,r.a.createElement(k.a,{className:"mt-2 mt-sm-0 mr-sm-2",variant:"outline-secondary",as:E.b,to:A.LOGIN},"Logowanie"),r.a.createElement(k.a,{className:"mt-2 mt-sm-0 mr-sm-2",variant:"outline-info",as:E.b,to:A.REGISTRATION},"Rejestracja")))))},H=function(e){var a=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement("main",null,a),r.a.createElement("footer",{className:"footer py-4 mt-2 bg-white"},r.a.createElement(y.a,null,r.a.createElement(w.a,{className:"align-items-center justify-content-center"},r.a.createElement("div",{className:"col-md-4 text-center"},r.a.createElement("span",{className:"copyright"},"Copyright \xa9 ",(new Date).getFullYear()))))))},D=t(7),M=t(79),Z=t(35),V=t(73),J=t(129),K=function(e){var a=e.children,t=Object(n.useContext)(d),o=t.createPost,c=t.getImage,l=Object(n.useState)(""),m=Object(b.a)(l,2),u=m[0],p=m[1],f=S().user;return f?r.a.createElement(y.a,{className:"my-5"},r.a.createElement(w.a,{className:"justify-content-center"},u&&r.a.createElement(Z.a,{variant:"success",className:"col-xs-10",onClose:function(){return p("")},dismissible:!0},r.a.createElement(Z.a.Heading,null,"Doda\u0142e\u015b nowe og\u0142oszenie"),"Przejd\u017a",r.a.createElement(Z.a.Link,{as:E.b,to:A.POST+"/"+u,className:"ml-1 mr-1"},"do og\u0142oszenia"),"lub",r.a.createElement(Z.a.Link,{as:E.b,to:A.HOME,className:"ml-1"},"do strony g\u0142\xf3wnej"),"."),r.a.createElement(v.a,{xs:12,md:8},r.a.createElement(j.a,{className:"shadow"},r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,{className:"text-center mb-2"},"Nowe og\u0142oszenie"),r.a.createElement(V.a,{onSubmit:function(e,a){var t=a.setSubmitting,n=e.title,r=e.description,l=e.address,m=e.image,u=Object(J.a)();t(!0),c(u).put(m).on("state_changed",(function(){}),(function(e){console.error(e)}),Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(u).getDownloadURL();case 2:return a=e.sent,e.next=5,o(u,{title:n,description:r,address:l.place_name,coordinates:l.center,imageURL:a,authorId:f.uid,createdAt:Date.now()});case 5:p(u),t(!1);case 7:case"end":return e.stop()}}),e)}))))},initialValues:{title:"",description:"",address:{place_name:"",center:[]},image:""},validate:function(e){var a={};return e.title||(a.title="Tytu\u0142 wymagany"),e.description||(a.description="Opis wymagany"),e.address.place_name||(a.address="Adres wymagany"),e.image||(a.image="Zdj\u0119cie wymagane"),e.address.place_name&&!e.address.center&&(a.address="Niepoprawny lub niepe\u0142ny adres, skorzystaj z wyszukiwarki"),a}},(function(e){return a(e)}))))))):r.a.createElement(Z.a,{variant:"danger"},"Zaloguj si\u0119 by doda\u0107 post")},X=function(){var e=Object(n.useState)(""),a=Object(b.a)(e,2),t=a[0],o=a[1],c=Object(n.useState)({}),l=Object(b.a)(c,2),i=l[0],s=l[1],m=Object(n.useState)(!1),u=Object(b.a)(m,2),d=u[0],p=u[1],E=function(e){var a=Object(n.useState)(e),t=Object(b.a)(a,2),r=t[0],o=t[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){o(e)}),1e3);return function(){clearTimeout(a)}}),[e]),r}(t);return Object(n.useEffect)((function(){E?(p(!0),F(E).then((function(e){p(!1);var a=e.length?e.reduce((function(e,a){return a.id in e||(e[a.id]={place_name:a.place_name,center:a.center}),e}),{}):{};s(a)}))):s({})}),[E]),r.a.createElement(K,null,(function(e){var a=e.handleSubmit,t=e.handleChange,n=e.handleBlur,c=e.values,l=e.touched,m=e.errors,u=e.setFieldValue,p=e.setFieldError,E=e.isSubmitting;return r.a.createElement(D.a,{noValidate:!0,onSubmit:a},r.a.createElement(D.a.Group,{controlId:"formTitle"},r.a.createElement(D.a.Label,null,"Tytu\u0142"),r.a.createElement(D.a.Control,{type:"text",name:"title",autoComplete:"off",value:c.title,onChange:t,onBlur:n,isInvalid:l.title&&!!m.title,isValid:l.title&&!m.title}),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},m.title)),r.a.createElement(D.a.Group,{controlId:"formDescription"},r.a.createElement(D.a.Label,null,"Opis"),r.a.createElement(D.a.Control,{type:"text",as:"textarea",rows:"3",name:"description",autoComplete:"off",value:c.description,onChange:t,onBlur:n,isInvalid:l.description&&!!m.description,isValid:l.description&&!m.description}),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},m.description)),r.a.createElement(D.a.Group,{controlId:"formAddress"},r.a.createElement(D.a.Label,null,"Adres"),r.a.createElement(D.a.Control,{type:"text",name:"address",autoComplete:"off",value:c.address.place_name,onChange:function(e){u("address",Object(g.a)({},c.address,{place_name:e.target.value})),o(e.currentTarget.value)},onBlur:n,isInvalid:l.address&&!!m.address,isValid:l.address&&!m.address}),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},m.address)),r.a.createElement(M.a,null,!d&&Boolean(Object.keys(i).length)&&Object.keys(i).map((function(e){var a=i[e];return r.a.createElement(M.a.Item,{key:e,action:!0,onClick:function(e){e.preventDefault(),u("address",{place_name:a.place_name,center:a.center}),s({}),o("")}},a.place_name)})),d&&r.a.createElement(M.a.Item,{className:"d-flex mb-2 align-items-center"},r.a.createElement(h.a,{animation:"border",variant:"info",className:"mr-2"}),"Szukam...")),r.a.createElement(D.a.Group,{controlId:"formImage"},r.a.createElement(D.a.Label,null,"Zdj\u0119cie"),r.a.createElement(D.a.File,{id:"form-image-custom",custom:!0},r.a.createElement(D.a.File.Input,{name:"image",accept:"image/*",isInvalid:l.image&&!!m.image,isValid:l.image&&!m.image,onBlur:n,onChange:function(e){var a=e.target.files[0];if(a.type&&"image"!==a.type.split("/")[0])return p("image","Niew\u0142a\u015bciwy format obrazu"),void u("image","");u("image",a)}}),r.a.createElement(D.a.File.Label,{"data-browse":"Wybierz zdj\u0119cie"},c.image.name||"Nie wybrano zdj\u0119cia"),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},m.image))),r.a.createElement(k.a,{disabled:E,type:"submit",variant:"info",className:"mt-2 mx-auto float-right"},"Stw\xf3rz nowe og\u0142oszenie"))}))},Y=t(87),q=function(e){var a=e.isLoginForm,t=Object(n.useContext)(d),o=t.signInWithEmailAndPassword,c=t.createUserWithEmailAndPassword,l=t.signInWithGoogle,m=t.signInWithGithub,u=t.createUser,p=Object(f.f)(),g=S().user,h=Object(n.useState)(""),z=Object(b.a)(h,2),N=z[0],O=z[1],I=function(){var e=Object(s.a)(i.a.mark((function e(a,t){var n,r,o,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),O(""),e.prev=2,e.next=5,a;case 5:if(n=e.sent,r=n.user,o=r.uid,c=r.displayName,l=r.email,s=r.photoURL,!n.additionalUserInfo.isNewUser){e.next=10;break}return e.next=10,u(o,{displayName:c,email:l,photoURL:s});case 10:t(!1),p.push(A.HOME),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),t(!1),L[e.t0.code]?O(L[e.t0.code]):O(e.t0.code);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(a,t){return e.apply(this,arguments)}}();return g?r.a.createElement(Z.a,{variant:"info"},"Ju\u017c jeste\u015b ".concat(a?"zalogowany":"zarejestrowany",". Przejd\u017a do "),r.a.createElement(E.b,{to:A.HOME},"strony g\u0142\xf3wnej.")):r.a.createElement(y.a,{className:"mt-5"},r.a.createElement(w.a,{className:"justify-content-md-center"},r.a.createElement(v.a,{xs:!0,md:6},r.a.createElement(V.a,{onSubmit:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,e.next=3,I((a?o:c)(t.email,t.password),r);case 3:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),initialValues:{email:"",password:""},validate:function(e){var a={};return e.email||(a.email="Email wymagany"),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)&&(a.email="Nieprawid\u0142owy adres email"),e.password||(a.password="Has\u0142o wymagane"),a}},(function(e){var t=e.handleSubmit,n=e.handleBlur,o=e.handleChange,c=e.values,u=e.touched,d=e.errors,p=e.isSubmitting,E=e.setSubmitting;return r.a.createElement(j.a,{className:"shadow"},r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,{className:"text-center mb-3"},a?"Zaloguj si\u0119":"Zarejestruj si\u0119"),r.a.createElement(D.a,{onSubmit:t},r.a.createElement(D.a.Group,{controlId:"formEmail"},r.a.createElement(D.a.Label,null,"Email"),r.a.createElement(D.a.Control,{type:"email",name:"email",autoComplete:"username",value:c.email,onBlur:n,onChange:o,isInvalid:u.email&&!!d.email||N,isValid:u.email&&!d.email}),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},d.email),r.a.createElement(D.a.Control.Feedback,{type:"valid"})),r.a.createElement(D.a.Group,{controlId:"formPassword"},r.a.createElement(D.a.Label,null,"Has\u0142o"),r.a.createElement(D.a.Control,{type:"password",name:"password",autoComplete:"".concat(a?"current":"new","-password"),onBlur:n,value:c.password,onChange:o,isInvalid:u.password&&!!d.password||N,isValid:u.password&&!d.password}),r.a.createElement(D.a.Control.Feedback,{type:"invalid"},d.password)),N&&r.a.createElement(Z.a,{variant:"danger"},N),r.a.createElement("div",{className:"text-right"},r.a.createElement(k.a,{disabled:p,type:"submit",variant:"info"},a?"Zaloguj si\u0119":"Zarejestruj si\u0119")))),a&&r.a.createElement(j.a.Footer,{className:"bg-white"},r.a.createElement(w.a,null,r.a.createElement(v.a,null,r.a.createElement(k.a,{disabled:p,variant:"outline-danger",block:!0,onClick:Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(l(),E);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(x.a,{icon:Y.b,className:"mr-2"}),"Google")),r.a.createElement(v.a,null,r.a.createElement(k.a,{disabled:p,variant:"outline-dark",block:!0,onClick:Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(m(),E);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(x.a,{icon:Y.a,className:"mr-2"}),"Github")))))})))))},Q=t(98),$=function(e){var a=e.postId,t=Object(n.useContext)(d),o=t.getPostComments,c=t.getUser,l=r.a.useState(""),m=Object(b.a)(l,2),u=m[0],p=m[1],E=r.a.useState(!1),f=Object(b.a)(E,2),w=f[0],v=f[1],y=r.a.useState([]),z=Object(b.a)(y,2),N=z[0],x=z[1],O=S().user;Object(n.useEffect)((function(){v(!0);var e=o(a).onSnapshot(function(){var e=Object(s.a)(i.a.mark((function e(a){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.docs.map(function(){var e=Object(s.a)(i.a.mark((function e(a){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.data(),e.next=3,c(t.authorId);case 3:return n=e.sent,e.abrupt("return",Object(g.a)({id:a.id},t,{author:Object(g.a)({uid:t.authorId},n)}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 2:return t=e.sent,v(!1),e.t0=x,e.next=7,t;case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());return function(){e()}}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Komentarze"),r.a.createElement(j.a,{className:"shadow mb-4"},r.a.createElement(j.a.Body,null,w&&r.a.createElement("div",{className:"d-flex justify-content-center align-items-center p-5"},r.a.createElement(h.a,{animation:"border",variant:"info"})),!w&&r.a.createElement(r.a.Fragment,null,N.length>0?r.a.createElement("ul",{className:"list-unstyled"},N.map((function(e,a){return r.a.createElement("li",{key:e.id},a>0&&r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex align-items-center mb-2"},r.a.createElement(R,{className:"rounded mr-2",user:e.author}),r.a.createElement("h5",{className:"mb-0 flex-grow-1 d-inline-block text-truncate",title:e.author.displayName||e.author.email},e.author.displayName||e.author.email),r.a.createElement("span",{className:"text-right"},T(e.createdAt))),r.a.createElement("p",null,e.value))}))):r.a.createElement("p",{className:"m-0"},"Brak komentarzy.")))),r.a.createElement("h4",null,"Dodaj komentarz"),r.a.createElement(j.a,{className:"shadow mb-4"},r.a.createElement(j.a.Body,null,O?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex align-items-center mb-2"},r.a.createElement(R,{className:"rounded mr-2",user:O}),r.a.createElement("h5",{className:"mb-0"},O.displayName||O.email)),r.a.createElement(D.a,{onSubmit:function(e){e.preventDefault(),p(""),o(a).add({authorId:O.uid,createdAt:Date.now(),value:u}).catch((function(e){console.log("addComment",e)}))}},r.a.createElement(D.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(D.a.Control,{value:u,onChange:function(e){return p(e.target.value)},as:"textarea",rows:"3"})),r.a.createElement(k.a,{disabled:!u,variant:"info",type:"submit",className:"float-right"},"Dodaj"))):r.a.createElement("p",{className:"m-0"},"Musisz by\u0107 zalogowany by doda\u0107 komentarz."))))},ee=Object(n.lazy)((function(){return Promise.all([t.e(3),t.e(4)]).then(t.bind(null,139))})),ae=function(e){var a=e.match.params.postId,t=Object(n.useContext)(d),o=t.getPost,c=t.getUser,l=r.a.useState({}),m=Object(b.a)(l,2),u=m[0],p=m[1],E=r.a.useState(!0),f=Object(b.a)(E,2),k=f[0],z=f[1];return Object(n.useEffect)((function(){(function(){var e=Object(s.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.prev=1,e.next=4,o(a).get();case 4:if(!(t=e.sent).exists){e.next=11;break}return n=t.data(),e.next=9,c(n.authorId);case 9:r=e.sent,p(Object(g.a)({},n,{author:Object(g.a)({},r,{uid:n.authorId})}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("loadPost",e.t0);case 16:return e.prev=16,z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"placeholder-map shadow d-flex justify-content-center align-items-center"},r.a.createElement(n.Suspense,{fallback:r.a.createElement(h.a,{animation:"grow",variant:"light"})},!k&&u.coordinates&&r.a.createElement(ee,{coordinates:u.coordinates}))),r.a.createElement(y.a,{as:"section",className:"post-container"},r.a.createElement(w.a,{className:"justify-content-center"},r.a.createElement(v.a,{md:"10"},r.a.createElement(j.a,{className:"shadow mb-4"},k?r.a.createElement("div",{className:"d-flex justify-content-center align-items-center p-5"},r.a.createElement(h.a,{animation:"border",variant:"info"})):r.a.createElement(j.a.Body,null,r.a.createElement("h1",null,u.title),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(R,{className:"rounded mr-2",user:u.author}),r.a.createElement("span",{className:"flex-grow-1 text-truncate"},u.author.displayName||u.author.email),r.a.createElement("span",{className:"text-right"},T(u.createdAt))),r.a.createElement("hr",null),r.a.createElement(Q.a,{fluid:!0,rounded:!0,src:u.imageURL,alt:"zdjecie",className:"mb-2"}),r.a.createElement("p",null,u.address),r.a.createElement("hr",null),r.a.createElement("p",null,u.description)))),r.a.createElement(v.a,{md:"10",className:""},r.a.createElement($,{postId:a})))))},te=t(78),ne=function(){return r.a.createElement(y.a,{className:"mt-5 mb-5"},r.a.createElement(w.a,{className:"justify-content-center"},r.a.createElement(v.a,{lg:8,className:"mb-4"},r.a.createElement(j.a,{className:"shadow"},r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Text,null,r.a.createElement("p",null,"Aplikacja ",r.a.createElement("strong",null,"//FIXME")," zosta\u0142a zaprojektowana, aby w spos\xf3b intuicyjny pozwoli\u0107 u\u017cytkownikowi zg\u0142asza\u0107 zauwa\u017cone w przestrzeni miejskiej usterki, czy problemy."),r.a.createElement("p",null,"G\u0142\xf3wnym celem aplikacji jest spe\u0142nienie funkcji informacyjnej oraz sprawnej komunikacji mi\u0119dzy mieszka\u0144cami, a instytucjami decyzyjnymi. Ponadto ma za zadanie scali\u0107 interesy mieszka\u0144c\xf3w oraz wzbudzi\u0107 w nich poczucie to\u017csamo\u015bci z miejscem w kt\xf3rym \u017cyj\u0105 na co dzie\u0144.",r.a.createElement("br",null),"Ka\u017cdy zainteresowany, mo\u017ce bez przeszk\xf3d przegl\u0105da\u0107 og\u0142oszenia innych u\u017cytkownik\xf3w, a po za\u0142o\u017ceniu konta oraz zalogowaniu dodatkowo dodawa\u0107 nowe wraz ze zdj\u0119ciem, a tak\u017ce lajkowa\u0107 i komentowa\u0107 posty."),r.a.createElement(te.a,{className:"mb-3 text-dark"},[{src:"/images/responsive.png",text:"Responsywno\u015b\u0107"},{src:"/images/home.png",text:"Strona g\u0142\xf3wna"},{src:"/images/single-post.png",text:"Og\u0142oszenie"},{src:"/images/comments.png",text:"Komentarze"},{src:"/images/sign-in.png",text:"Logowanie"},{src:"/images/register.png",text:"Rejestracja"},{src:"/images/new-post.png",text:"Nowe og\u0142oszenie"}].map((function(e){return r.a.createElement(te.a.Item,{color:"black"},r.a.createElement("img",{className:"d-block w-100",src:"/projekt-pwa"+e.src,alt:e.text}),r.a.createElement(te.a.Caption,null,r.a.createElement("h3",{className:"text-dark"},e.text)))}))))))),r.a.createElement(v.a,{lg:4},r.a.createElement(j.a,{className:"shadow"},r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Text,null,r.a.createElement("p",null,"Ca\u0142o\u015b\u0107 jest w pe\u0142ni responsywna, u\u017cytkownik mo\u017ce z niej korzysta\u0107 na urz\u0105dzeniach stacjonarnych oraz mobilnych.",r.a.createElement("br",null),"W projekcie zastosowano PWA - Progressive Web App (Progresywn\u0105 Aplikacj\u0119 Internetow\u0105), co umo\u017cliwia instalacj\u0119 aplikacji, a tak\u017ce wp\u0142ywa na szybko\u015b\u0107 dzia\u0142ania.",r.a.createElement("br",null),"Uwierzytelnianie u\u017cytkownik\xf3w odbywa si\u0119 poprzez u\u017cycie loginu i has\u0142a oraz z wykorzystaniem konta Google lub GitHub.",r.a.createElement("br",null),"Firebase Cloud Firestore oraz Cloud Storage zosta\u0142y wykorzystane do synchronizacji oraz przechowywania i przetwarzania danych multimedialnych."),r.a.createElement(E.b,{to:A.HOME},"Link do aplikacji na Github Page"),[{href:"https://wizard.uek.krakow.pl/~s181853/",label:"Link do aplikacji na serwerze Wizard"},{href:"https://github.com/181853/projekt-pwa",label:"Link do repozytorium projektu na GitHub"},{href:"https://github.com/181853/projekt-pwa/projects/1",label:"Link do zarz\u0105dzania projektem informatycznym na GitHub"},{href:"https://marvelapp.com/22ee6256",label:"Link do interaktywnego prototypu aplikacji (has\u0142o: fixme)"}].map((function(e){return r.a.createElement("a",{className:"d-block mb-1",target:"_blank",rel:"noopener noreferrer",href:e.href},e.label)}))))))))},re=function(){return r.a.createElement(q,{isLoginForm:!0})},oe=function(){return r.a.createElement(q,null)},ce=function(){return r.a.createElement(E.a,null,r.a.createElement(H,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:A.ROOT,component:ne}),r.a.createElement(f.a,{path:A.HOME,component:W}),r.a.createElement(f.a,{path:A.REGISTRATION,component:oe}),r.a.createElement(f.a,{path:A.LOGIN,component:re}),r.a.createElement(f.a,{path:A.POST_NEW,component:X}),r.a.createElement(f.a,{path:A.POST+"/:postId",component:ae}))))},le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(121);c.a.render(r.a.createElement(p,null,r.a.createElement(ce,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/projekt-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/projekt-pwa","/service-worker.js");le?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ie(a,e)}))}}()}},[[101,1,2]]]);
//# sourceMappingURL=main.4f263c1f.chunk.js.map